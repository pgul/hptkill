# $Id$
#
# Legacy makefile for IBM OS/2 + EMX Runtime library
# Do not support husky build enviroment

SRC_DIR	= ../src/

CC	= gcc
RM	= del

CFLAGS	= -D__OS2__ -I../.. -c
COPT	= -O2
LFLAGS	= -Zcrtdll

LIBS	= ../../smapi/smapiemx.a ../../smapi/patmat.o ../../fidoconf/fconfemx.a

EXENAMEFLAG = -o

OBJ	= .o
EXE	= .exe

OBJS	= hptkill$(OBJ)
TARGET	= hptkill$(EXE)

all: $(OBJS) $(TARGET)

%(OBJ): $(SRC_DIR)%.c
	$(CC) $(COPT) $(CFLAGS) $(SRC_DIR)$*.c

$(TARGET): $(OBJS)
	$(CC) $(LFLAGS) $(EXENAMEFLAG) $(TARGET) $(OBJS) $(LIBS)

clean:
	-$(RM) *$(OBJ)

distclean: clean
	-$(RM) $(TARGET)
